import {assert} from "rtts_assert/rtts_assert";
import {bind} from 'angular2/di';
import {Compiler,
  CompilerCache} from 'angular2/src/core/compiler/compiler';
import {Reflector,
  reflector} from 'angular2/src/reflection/reflection';
import {Parser,
  Lexer,
  ChangeDetection,
  dynamicChangeDetection} from 'angular2/change_detection';
import {ExceptionHandler} from 'angular2/src/core/exception_handler';
import {TemplateLoader} from 'angular2/src/core/compiler/template_loader';
import {TemplateResolver} from 'angular2/src/core/compiler/template_resolver';
import {DirectiveMetadataReader} from 'angular2/src/core/compiler/directive_metadata_reader';
import {ShadowDomStrategy,
  NativeShadowDomStrategy} from 'angular2/src/core/compiler/shadow_dom_strategy';
import {XHR} from 'angular2/src/core/compiler/xhr/xhr';
import {XHRMock} from 'angular2/src/mock/xhr_mock';
import {ComponentUrlMapper} from 'angular2/src/core/compiler/component_url_mapper';
import {UrlResolver} from 'angular2/src/core/compiler/url_resolver';
import {StyleUrlResolver} from 'angular2/src/core/compiler/style_url_resolver';
import {StyleInliner} from 'angular2/src/core/compiler/style_inliner';
import {CssProcessor} from 'angular2/src/core/compiler/css_processor';
import {Injector} from 'angular2/di';
import {List,
  ListWrapper} from 'angular2/src/facade/collection';
import {FunctionWrapper} from 'angular2/src/facade/lang';
function _getRootBindings() {
  return [bind(Reflector).toValue(reflector)];
}
function _getAppBindings() {
  return [bind(ShadowDomStrategy).toClass(NativeShadowDomStrategy), Compiler, CompilerCache, TemplateResolver, bind(ChangeDetection).toValue(dynamicChangeDetection), TemplateLoader, DirectiveMetadataReader, Parser, Lexer, ExceptionHandler, bind(XHR).toClass(XHRMock), ComponentUrlMapper, UrlResolver, StyleUrlResolver, StyleInliner, bind(CssProcessor).toFactory(() => new CssProcessor(null), [])];
}
export function createTestInjector(bindings) {
  assert.argumentTypes(bindings, List);
  var rootInjector = new Injector(_getRootBindings());
  return rootInjector.createChild(ListWrapper.concat(_getAppBindings(), bindings));
}
Object.defineProperty(createTestInjector, "parameters", {get: function() {
    return [[List]];
  }});
export function inject(tokens, fn) {
  assert.argumentTypes(tokens, List, fn, Function);
  return new FunctionWithParamTokens(tokens, fn);
}
Object.defineProperty(inject, "parameters", {get: function() {
    return [[List], [Function]];
  }});
export class FunctionWithParamTokens {
  constructor(tokens, fn) {
    assert.argumentTypes(tokens, List, fn, Function);
    this._tokens = tokens;
    this._fn = fn;
  }
  execute(injector) {
    var params = ListWrapper.map(this._tokens, (t) => injector.get(t));
    FunctionWrapper.apply(this._fn, params);
  }
}
Object.defineProperty(FunctionWithParamTokens, "parameters", {get: function() {
    return [[List], [Function]];
  }});
Object.defineProperty(FunctionWithParamTokens.prototype.execute, "parameters", {get: function() {
    return [[Injector]];
  }});
//# sourceMappingURL=test_injector.js.map

//# sourceMappingURL=./test_injector.map