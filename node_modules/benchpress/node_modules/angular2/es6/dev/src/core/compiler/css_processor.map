{"version":3,"sources":["css_processor.js"],"names":[],"mappings":"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","file":"/Users/tbosch/projects/angular2/modules/angular2/src/core/compiler/css_processor.js","sourcesContent":["import {Injectable} from 'angular2/di';\nimport {DOM} from 'angular2/src/dom/dom_adapter';\n\nimport {isPresent} from 'angular2/src/facade/lang';\nimport {List} from 'angular2/src/facade/collection';\n\nimport {CompileStep} from './pipeline/compile_step';\nimport {CompileElement} from './pipeline/compile_element';\nimport {CompileControl} from './pipeline/compile_control';\n\nimport {ShadowDomStrategy} from './shadow_dom_strategy';\nimport {DirectiveMetadata} from './directive_metadata';\n\n/**\n * Processes the <style> tags during the compilation:\n * - Apply any given transformers,\n * - Apply the shadow DOM strategy style step.\n */\n@Injectable()\nexport class CssProcessor {\n  _transformers: List<CssTransformer>;\n\n  constructor(transformers: List<CssTransformer>) {\n    this._transformers = transformers;\n  }\n\n  /**\n   * Returns a compile step to be added to the compiler pipeline.\n   *\n   * @param {DirectiveMetadata} cmpMetadata\n   * @param {ShadowDomStrategy} shadowDomStrategy\n   * @param {string} templateUrl The base URL of the template\n   */\n  getCompileStep(cmpMetadata: DirectiveMetadata, shadowDomStrategy: ShadowDomStrategy,\n    templateUrl: string) {\n    var strategyStep = shadowDomStrategy.getStyleCompileStep(cmpMetadata, templateUrl);\n    return new _CssProcessorStep(strategyStep, this._transformers);\n  }\n}\n\nexport class CssTransformer {\n  transform(styleElement) {};\n}\n\nclass _CssProcessorStep extends CompileStep {\n  _strategyStep: CompileStep;\n  _transformers: List<CssTransformer>;\n\n  constructor(strategyStep: CompileStep, transformers: List<CssTransformer>) {\n    super();\n    this._strategyStep = strategyStep;\n    this._transformers = transformers;\n  }\n\n  process(parent:CompileElement, current:CompileElement, control:CompileControl) {\n    if (DOM.tagName(current.element) == 'STYLE') {\n      current.ignoreBindings = true;\n\n      if (isPresent(this._transformers)) {\n        var styleEl = current.element;\n        for (var i = 0; i < this._transformers.length; i++) {\n          this._transformers[i].transform(styleEl);\n        }\n      }\n\n      if (isPresent(this._strategyStep)) {\n        this._strategyStep.process(parent, current, control);\n      }\n    }\n  }\n}\n"]}