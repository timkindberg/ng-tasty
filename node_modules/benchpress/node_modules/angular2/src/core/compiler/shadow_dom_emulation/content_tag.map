{"version":3,"sources":["content_tag.js"],"names":[],"mappings":"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","file":"/Users/tbosch/projects/angular2/modules/angular2/src/core/compiler/shadow_dom_emulation/content_tag.js","sourcesContent":["import * as ldModule from './light_dom';\nimport {Inject, Injectable} from 'angular2/di';\nimport {DOM} from 'angular2/src/dom/dom_adapter';\nimport {isPresent} from 'angular2/src/facade/lang';\nimport {List, ListWrapper} from 'angular2/src/facade/collection';\n\nclass ContentStrategy {\n  nodes:List;\n  insert(nodes:List){}\n}\n\n/**\n * An implementation of the content tag that is used by transcluding components.\n * It is used when the content tag is not a direct child of another component,\n * and thus does not affect redistribution.\n */\n@Injectable()\nclass RenderedContent extends ContentStrategy {\n  beginScript;\n  endScript;\n\n  constructor(contentEl) {\n    super();\n    this.beginScript = contentEl;\n    this.endScript = DOM.nextSibling(this.beginScript);\n    this.nodes = [];\n  }\n\n  // Inserts the nodes in between the start and end scripts.\n  // Previous content is removed.\n  insert(nodes:List) {\n    this.nodes = nodes;\n    DOM.insertAllBefore(this.endScript, nodes);\n    this._removeNodesUntil(ListWrapper.isEmpty(nodes) ? this.endScript : nodes[0]);\n  }\n\n  _removeNodesUntil(node) {\n    var p = DOM.parentElement(this.beginScript);\n    for (var next = DOM.nextSibling(this.beginScript);\n         next !== node;\n         next = DOM.nextSibling(this.beginScript)) {\n      DOM.removeChild(p, next);\n    }\n  }\n}\n\n/**\n * An implementation of the content tag that is used by transcluding components.\n * It is used when the content tag is a direct child of another component,\n * and thus does not get rendered but only affect the distribution of its parent component.\n */\nclass IntermediateContent extends ContentStrategy {\n  destinationLightDom:ldModule.LightDom;\n\n  constructor(destinationLightDom:ldModule.LightDom) {\n    super();\n    this.destinationLightDom = destinationLightDom;\n    this.nodes = [];\n  }\n\n  insert(nodes:List) {\n    this.nodes = nodes;\n    this.destinationLightDom.redistribute();\n  }\n}\n\n\nexport class Content {\n  select:string;\n  _strategy:ContentStrategy;\n  contentStartElement;\n\n  constructor(destinationLightDom:ldModule.LightDom, contentStartEl, selector:string) {\n    this.select = selector;\n    this.contentStartElement = contentStartEl;\n    this._strategy = isPresent(destinationLightDom) ?\n      new IntermediateContent(destinationLightDom) :\n      new RenderedContent(contentStartEl);\n  }\n\n  nodes():List {\n    return this._strategy.nodes;\n  }\n\n  insert(nodes:List) {\n    this._strategy.insert(nodes);\n  }\n}\n"]}